<h3>Getting JSON(-LD) Data</h3>

<p>Open Context offers two main ways to get JSON-LD data. The better-practice approach relies upon <a title="Wikipedia introduction" href="http://en.wikipedia.org/wiki/Content_negotiation" target="_blank">HTTP content negotiation</a>. The second expedient approach involves adding a <samp>.json</samp> to request URLs. The table below provides examples for using these different approaches.</p>

<table class="table">
    <thead>
        <th class="col-sm-3">Approach</th>
        <th class="col-sm-9">Description and Examples</th>
    </thead>
    <tbody>
        <tr>
            <th>
                Content Negotiation
            </th>
            <td>
                <p>Open Context supports content resolution for both item record and search APIs. To request JSON data, include either of the following in the HTTP header of your request:
                </p>
                <ul class="list-unstyled">
                    <li><samp>Accept: application/json</samp> (Usually also valid as JSON-LD)</li>
                    <li><samp>Accept: application/vnd.geo+json</samp> (Usually also valid as JSON-LD)</li>
                    <li><samp>Accept: application/ld+json</samp> (Strict JSON-LD)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <th>
                Modifying Item Record URLs
            </th>
            <td>
                <p>For individual record items, you can get JSON data by simply adding a "<strong>.json</strong>" to the end of a record's URL. For example, you can get the JSON for this object: <samp><a title="Example pottery object" target="_blank" href="{{ base_url}}/subjects/2CC0F946-95F0-4D40-7753-6C61D3A416CC">{{ base_url}}/subjects/2CC0F946-95F0-4D40-7753-6C61D3A416CC</a></samp>, with this URL: <samp><a title="JSON for the pottery object" target="_blank" href="{{ base_url}}/subjects/2CC0F946-95F0-4D40-7753-6C61D3A416CC.json">{{ base_url}}/subjects/2CC0F946-95F0-4D40-7753-6C61D3A416CC<strong>.json</strong></a></samp>.</p>
                <p>Because JSON-LD has some constraints that make it unsuitable to express complex geospatial features (see note below), Open Context allows you to specifically request strict JSON-LD either through content negotiation or by appending <samp>.jsonld</samp> to item URLs.</p>
            </td>
        </tr>
        <tr>
            <th>
                Modifying Query URLs
            </th>
            <td>
                <p>Similarly, adding a "<strong>.json</strong>" to search URLs also requests JSON data. To do so, add the ".json" just before the quesion-mark ("?") in a search URL. If the URL doesn't have a question-mark, append the ".json" at the end of the URL.</p>
                <ol>
                    <li>
                        <h5><em>Query without a "?" in the URL</em></h5>
                        <p>The search URL <samp><a title="Query for Kenan Tepe" target="_blank" href="{{ base_url}}/subjects-search/Turkey/Kenan+Tepe">{{ base_url}}/subjects-search/Turkey/Kenan+Tepe</a></samp> becomes <samp><a title="JSON query for Kenan Tepe" target="_blank" href="{{ base_url}}/subjects-search/Turkey/Kenan+Tepe.json">{{ base_url}}/subjects-search/Turkey/Kenan+Tepe<strong>.json</strong></a></samp> for a JSON request.
                        </p>
                    </li>
                    <li>
                        <h5><em>Query with a "?" in the URL</em></h5>
                        <p>The search URL <samp><a title="Query for Murlo project" target="_blank" href="{{ base_url}}/subjects-search/?proj=24-murlo">{{ base_url}}/subjects-search/?proj=24-murlo</a></samp> becomes <samp><a title="JSON query for Murlo project" target="_blank" href="{{ base_url}}/subjects-search/.json?proj=24-murlo">{{ base_url}}/subjects-search/<strong>.json</strong>?proj=24-murlo</a></samp> for a JSON request.
                        </p>
                    </li>
                </ol>
            </td>
        </tr>
        <tr>
            <th>
                Modifying Query URLs with JSONP
            </th>
            <td>
                <p>Finally, while Open Context supports <a href="http://enable-cors.org/" title="Cross Origin Resource Sharing" target="_blank">CORS (Cross Origin Resource Sharing)</a>, in practice some clients may still have trouble accessing JSON data. For these clients, Open Context APIs support JSONP (<a href="https://en.wikipedia.org/wiki/JSONP" target="_blank">JSON with "padding"</a>) for URLs with a "<strong>.json</strong>" added as described above. To request JSONP, add a "callback" parameter to your request, as in the examples below:</p>
                <ol>
                    <li>
                        <h5><em>Example (Search/Query Request):</em></h5>
                        <p>The plain JSON(-LD) request URL <samp><a title="JSON query for Kenan Tepe" target="_blank" href="{{ base_url}}/subjects-search/Turkey/Kenan+Tepe.json">{{ base_url}}/subjects-search/Turkey/Kenan+Tepe<strong>.json</strong></a></samp> can be made as a JSONP request like: <samp><a title="JSON query for Kenan Tepe" target="_blank" href="{{ base_url}}/subjects-search/Turkey/Kenan+Tepe.json?callback=myFunction">{{ base_url}}/subjects-search/Turkey/Kenan+Tepe.json?<strong>callback=myFunction</strong></a></samp>
                        </p>
                    </li>
                    <li>
                        <h5><em>Example (Item Request):</em></h5>
                        <p>The plain JSON(-LD) request URL <samp><a title="JSON for the Kenan Tepe project" target="_blank" href="{{ base_url}}/projects/3DE4CD9C-259E-4C14-9B03-8B10454BA66E.json">{{ base_url}}/projects/3DE4CD9C-259E-4C14-9B03-8B10454BA66E<strong>.json</strong></a></samp> can be made as a JSONP request like: <samp><a title="JSON query for Kenan Tepe" target="_blank" href="{{ base_url}}/projects/3DE4CD9C-259E-4C14-9B03-8B10454BA66E.json?callback=oneDoesNotSimply">{{ base_url}}/projects/3DE4CD9C-259E-4C14-9B03-8B10454BA66E.json?<strong>callback=oneDoesNotSimply</strong></a></samp>
                        </p>
                    </li>
                </ol>
            </td>
        </tr>
    </tbody>
</table>


<div id="json-ld-caveat" style="margin-top:20px;">
    <h4>Notes about GeoJSON, JSON, and JSON-LD</h4>
    
    <p>In general, the GeoJSON, JSON, and JSON-LD responses from Open Context are all exactly the same. However, the JSON-LD standard currently has some constraints that make it unsuitable for expressing deeply nested lists of coordinates as required for representing non-point geospatial features. If you specify a JSON-LD response (as opposed to a plain JSON or GeoJSON response), only point geospatial features will be returned by Open Context. This will help keep the JSON-LD response valid, but it will not express richer geospatial data for polygon, multipolygon or line features.</p>
</div>

<div id="json-ld-caveat" style="margin-top:20px;">
    <h4>Other Linked Data Representations</h4>
    
    <p>Open Context provides preliminary / experimental support for other RDF (linked data) representations via content negotiation or by appending extensions to the URLs of item records. These now include:</p>
    <ul class="list-unstyled">
        <li><samp>Accept: application/n-triples</samp>, or extension: <samp>.nt</samp></li>
        <li><samp>Accept: application/rdf+xml</samp>, or extension: <samp>.rdf</samp></li>
        <li><samp>Accept: text/turtle</samp>, or extension: <samp>.ttl</samp></li>
    </ul>
</div>

