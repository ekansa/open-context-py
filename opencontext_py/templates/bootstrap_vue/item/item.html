{% extends '../page.html' %}

{% block content %}

{% include '../item/parts/vue_shared.html' %}
{% include '../item/parts/vue_images_human_remains.html' %}
{% include '../color_gradients.html' %}
{% include '../common_geo.html' %}





<div id="project_hero_banner">
    {% if man_obj.hero %}
        <img class="img-fluid mx-auto d-block" 
             alt="project banner image" 
             src="https://{{ man_obj.hero }}" />
    {% elif man_obj.proj_hero %}
        <img class="img-fluid mx-auto d-block" 
            alt="project banner image" 
            src="https://{{ man_obj.proj_hero }}" />
    {% elif man_obj.proj_proj_hero %}
        <img class="img-fluid mx-auto d-block" 
            alt="project banner image" 
            src="https://{{ man_obj.proj_proj_hero }}" />
    {% else %}
        <img class="img-fluid mx-auto d-block" 
            alt="default project banner image" 
            src="https://opencontext.org/static/oc/images/projects/project-default-hero.png" />
    {%endif%}
</div>


<!-- General template for views of Open Context items -->
<div id="main">

    <div id="item-app" class="container-fluid">

        {% include '../item/parts/contexts.html' %}

        {% if full_media %}
        
            {% include '../item/parts/preview_iiif.html' %}
            {% include '../item/parts/preview_nexus.html' %}
            {% include '../item/parts/preview_x3dom.html' %}
            {% include '../item/parts/preview_pdf.html' %}
            {% include '../item/parts/preview_geojson.html' %}

        {%endif%}
        
        <div class="row">
            <div class="col-8">

        {% if not full_media %}

            {% include '../item/parts/preview_image.html' %}
            {% include '../item/parts/preview_nexus.html' %}
            {% include '../item/parts/preview_x3dom.html' %}
            {% include '../item/parts/preview_pdf.html' %}
            {% include '../item/parts/preview_geojson.html' %}

        {%endif%}

            {% include '../item/parts/content_text.html' %}
            {% include '../item/parts/observations.html' %}

            </div>

            <div class="col-4">

                <human-remains-results-alert
                    v-bind:human_remains_flagged="human_remains_flagged"
                    v-bind:human_remains_ok="human_remains_ok"
                    :alert_type="'item'"
                    @toggle_human_remains_ok="toggle_human_remains_ok($event)"
                ></human-remains-results-alert>

                {% include '../item/parts/media_download.html' %}

                {% include '../item/parts/citation.html' %}

                {% include '../item/parts/project_context.html' %}

                {% include '../item/parts/spacetime.html' %}

                {% include '../item/parts/license.html' %}
            </div>
        </div>

        {% if show_json %}
        <div class="row">
            <div class="col">
                <label for="item_json" class="form-label">Item JSON</label>
                <textarea class="form-control form-control-sm" id="item_json" rows="25">{{ item_json|safe }}
                </textarea>
            </div>
        </div>
        {%endif%}

    </div>

</div>

<script type="text/javascript">

  // Import Vue2Leaflet components. 
  {% if GEO_JSON %}
  const GEO_JSON = JSON.parse('{{ GEO_JSON|escapejs }}');
  {% else %}
  let GEO_JSON = null;
  {% endif %}
  const item_json = JSON.parse('{{ item_json|escapejs }}');
  const ITEM_UUID = item_json.uuid;

  {% if item.flag_human_remains %}
  // Initial state from the request session token.
  const HUMAN_REMAINS_FLAGGED = true;
  
  {% else %}

  const HUMAN_REMAINS_FLAGGED = false;

  {% endif %}

    
    var vm = new Vue(
      {
        delimiters: ['[[', ']]'],
        ref: 'item_app',
        el: '#item-app',
        data: {
            uuid: ITEM_UUID,
            human_remains_flagged: HUMAN_REMAINS_FLAGGED,
            human_remains_ok: HUMAN_REMAINS_OK,
        },
        computed: {
            
        },
        methods: {
            toggle_human_remains_ok: function(human_remains_ok) {
                this.human_remains_ok = human_remains_ok;
            },
        },
        created() {
    
        },
        components: {
          'common_map': vc_common_map,
          'human-remains-results-alert': vc_human_remains_results_alert,
          'human-remains-image': vc_human_remains_image,
        },
      },
    ).$mount('#app');
    
</script>


<script type="application/ld+json">
    {{ SCHEMA_ORG_JSON_LD|safe }}
</script>
{% endblock %}